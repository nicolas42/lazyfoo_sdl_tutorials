{
	// ------------------------
	// MARK: Device editor view
	
	DeviceEditorView:
	{
		nsClass: LBDeviceEditorView,
		axDescription: "Device",
		axHelp: "A Virtual Device allows connecting audio between sources, outputs and monitors",
		axIsIgnored: false,
		axRoleDescription: "Editor",
    	gxBackPainter: FillBack.deviceEditorBgColor,
		gxConsumeMouseClick: true,
		gxIntrinsicWidth: -1,
		gxWantsLayer: true,
    	gxLayout: [
			"V:|[topBar]-4-[topDivider]-0-[patchboardScroller]-0-[bottomDivider]-0-[bottomBar(42)]|",
		],
		gxChildViews:
		{
			topBar:
			{
				+: DeviceEditorTopBar,
				gxIntrinsicWidth: -1,
			},
			topDivider:
			{
				nsClass: GXDrawView,
				gxLayout: [ "H:|[self]|", "V:[self(1)]" ],
				gxBackPainter: FillBack.deviceEditorDividerColor,
				gxIntrinsicWidth: -1,
			},
			patchboardScroller:
			{
				nsClass: LBGXScrollView,
				axIsIgnored: true,
				gxCanDrawSubviewsIntoLayer: true,					// 10.11/10.12 needs this (DO NOT REMOVE)
				disableCanDrawSubviewsIntoLayerOnOrAfter1013: true,	// 10.13 needs this (DO NOT REMOVE)
				gxBackColor: "name:deviceEditorBg",
				gxVScrollbarWidth: 13,
				gxVScrollbar: ScrollBarView,	// vertical scroller only
				gxAutohidesScrollers: false,
				gxLayout: [ "H:|[self]|" ],
				gxIntrinsicWidth: -1,
				gxDocumentView:
				{
					// patchboard view
					nsClass: LBPatchboardView,
					axTitleKeyPath: name,
					gxViewName: "patchboardView",	// can't derive name from plist dict
					gxLayout: "H:|[self]|",			// forces width of patchboard view
                    gxBackPainter: FillBack.deviceEditorBgColor,
					gxIntrinsicWidth: -1,
				}
			},
			bottomDivider:
			{
				nsClass: GXDrawView,
				gxLayout: [ "H:|[self]|", "V:[self(1)]" ],
				gxBackPainter: FillBack.deviceEditorDividerColor,
				gxIntrinsicWidth: -1,
			},
			bottomBar:
			{
				+: DeviceEditorBottomBar,
				gxIntrinsicWidth: -1,
			}
		}
	},
	
	// ---------------------------
	// MARK: Device editor top bar
	
	DeviceEditorTopBar:
	{
		nsClass: GXDrawView,
		gxLayout: [
			"H:|[self]|",
			"H:|-12-[deviceName]-|",
			"H:|-0-[sourcesHeader(100)]",
			"H:|-0-[sourcesHeaderTagLine(165)]",
			
			"V:|-9-[deviceName(26)]-9-[sourcesHeader(18)]-1-[sourcesHeaderTagLine(14)]-5-|",
			"V:|-42-[addSource]",
			"V:|-42-[addSource]",
			"V:|-42-[outputsHeader(18)]-1-[outputsHeaderTagLine(14)]",
			"V:|-42-[addOutput]",
			"V:|-42-[monitorsHeader(18)]-1-[monitorsHeaderTagLine(14)]",
			"V:|-42-[addMonitor]",

			"H:|-190-[addSource(28)]",
			"H:[outputsHeader(235)]",
			"H:[outputsHeaderTagLine(235)]",
			"H:[outputsHeader]-(-38)-[addOutput(22)]",
			"H:[monitorsHeader(129)]-107-|",
			"H:[monitorsHeaderTagLine(129)]-107-|",
			"H:[addMonitor(28)]-20-|"
		],
		gxChildViews:
		{
			deviceName:
			{
				nsClass: LBDeviceNameField,
				axTitle: "Device Name",
				axHelp: "VO press to edit this device's name",
				gxDrawFocusRing: true,
				bezeled: false,
				gxEdgeInsets: "2, 2, 2, 2",
				gxLineBreakMode: 4,	// truncate tail
				gxValueKeyPath: "currentDevice.name",
				gxPlaceholderString: "Loopback Audio",
				gxPlaceholderStyle:
				{
					nsClass: GXStyledString,
					gxFontSize: 18,
					gxFontWeight: .4,
					gxFontColor: "name:mediumText",
					gxHAlign: 0
				},
				gxSelectionColor: "name:selection",
				gxTextPainter:
				{
					nsClass: GXStringPainter,
					gxFontSize: 18,
					gxFontWeight: .4,
					gxFontColor: "name:darkText",
					gxBackColor: "name:deviceEditorBg",
					gxHAlign: 0
				},
				gxBackPainter:
				{
					nsClass: "GXRoundRectPainter",
					gxCornerRadius: 4,
					gxFillColor: "name:deviceEditorBg",
					gxFrameColor: "name:deviceEditorBg",
					editing: {
						gxFrameColor: "name:buttonFrame",
					}
				},
				gxPencilForePainter:
				{
					+: ImagePainter.icon.edit,
					gxEdgeInsets: "-2.5, -2.5, -2.5, -2.5",
					gxDefaultSize: "26, 0",	// enough width. height comes from field
					gxHAlign: 1.0,	// hard right
					gxVAlign: 0.55,	// down a bit
					pressed: {
						gxTintColor: "name:darkGray",
					}
				}
			},
			sourcesHeader:
			{
				+: HeaderView.left,
				gxDefaultValue: "Sources"
			},
			sourcesHeaderTagLine:
			{
				+: HeaderTagLineView.left,
				gxValueKeyPath: "sourcesHeaderTagLine"
			},
			addSource:
			{
				nsClass: LBAddSourcePopupView,
				axHelp: "Creates a new source",
				axRoleDescription: "menu button",
				axTitle: "New Source",
				gxForePainter:
				{
					+: LabelFore,
					gxIcon: "icon.add.arrow",
					gxIconTintMask: "icon.add.arrow.mask",
					disabled: { gxIconTintColor: "name:buttonDisableTint" },
					pressed: { gxIconTintColor: "name:black" }
				},
				gxIntrinsicHeight: 22,
				gxOperateOnMouseDown: true,
				gxOperateOnMouseUp: false,
				gxValueKeyPath: "addSourceButton",
				lbAction: "addSourceAction:"
			},
			outputsHeader:
			{
				+: HeaderView.left,
				gxDefaultValue: "Output Channels"
			},
			outputsHeaderTagLine:
			{
				+: HeaderTagLineView.left,
				gxValueKeyPath: "outputsHeaderTagLine"
			},
			addOutput:
			{
				nsClass: GXButtonView,
				axHelp: "Creates a new output channel group",
				axTitle: "New Output Channels",
				gxForePainter:
				{
					+: ImagePainter.icon.add,
					gxTintMask: "icon.add.mask",
					disabled: { gxTintColor: "name:buttonDisableTint" },
					pressed: { gxTintColor: "name:black" }
				},
				gxIntrinsicHeight: 22,
				gxValueKeyPath: "addOutputButton",
			},
			monitorsHeader:
			{
				+: HeaderView.left,
				gxDefaultValue: "Monitors"
			},
			monitorsHeaderTagLine:
			{
				+: HeaderTagLineView.left,
				gxValueKeyPath: "monitorsHeaderTagLine"
			},
			addMonitor:
			{
				nsClass: LBAddMonitorPopupView,
				axHelp: "Creates a new monitor",
				axRoleDescription: "menu button",
				axTitle: "New Monitor",
				gxForePainter:
				{
					+: LabelFore,
					gxIcon: "icon.add.arrow",
					gxIconTintMask: "icon.add.arrow.mask",
					disabled: { gxIconTintColor: "name:buttonDisableTint" },
					pressed: { gxIconTintColor: "name:black" }
				},
				gxIntrinsicHeight: 22,
				gxOperateOnMouseDown: true,
				gxOperateOnMouseUp: false,
				gxValueKeyPath: "addMonitorButton",
				lbAction: "addMonitorAction:",
				lbItemIconTintColor: "name:darkText"
			}
		}
	},
	
	// ------------------------------
	// MARK: Device editor bottom bar
	
	DeviceEditorBottomBar:
	{
		nsClass: GXDrawView,
		gxLayout: [
			"H:|[self]|",
			"H:|-10-[deleteEditorElement(84)]-(>=0)-[hideMonitorsButtonView(118)]-15-|",
			"H:[showMonitorsButtonView(118)]-15-|",
			"V:|-8-[deleteEditorElement]",
			"V:|-8-[hideMonitorsButtonView]",
			"V:|-8-[showMonitorsButtonView]"
		],
		gxChildViews:
		{
			deleteEditorElement:
			{
				+: PatchboardButtonView,
				axHelp: "Deletes the selected virtual device elements",
				gxForePainter:
				{
					+: PatchboardButtonFore,
					gxEdgeInsets: "-3, 0, 2, 0",
					gxIcon: "icon.delete.editor",
					gxIconSpacing: 7
				},
				gxTitle: "Delete",
				gxValueKeyPath: deleteEditorElementButton
			},
			hideMonitorsButtonView:
			{
				+: PatchboardButtonView,
				axHelp: "Hides the Monitors column of the Device Editor",
				gxForePainter:
				{
					+: PatchboardButtonFore,
					gxIconSpacing: 4,
					gxIcon: "icon.hidden"
				},
				gxTitle: "Hide Monitors",
				gxValueKeyPath: showHideMonitorsButton
			},
			showMonitorsButtonView:
			{
				+: PatchboardButtonView,
				axHelp: "Show the Monitors column of the Device Editor",
				gxForePainter:
				{
					+: PatchboardButtonFore,
					gxIcon: "icon.visible",
					gxIconSpacing: 4
				},
				gxTitle: "Show Monitors",
				gxValueKeyPath: showHideMonitorsButton
			}
		}
	}
}
